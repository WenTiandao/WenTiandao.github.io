{"title":"hadoop-集群搭建","uid":"4e4f31add73d915abf83a9e83faf2202","slug":"HADOOP-集群搭建","date":"2022-11-07T16:00:00.000Z","updated":"2023-02-20T05:09:01.913Z","comments":true,"path":"api/articles/HADOOP-集群搭建.json","keywords":null,"cover":null,"content":"<h2 id=\"设置固定-IP\"><a href=\"#设置固定-IP\" class=\"headerlink\" title=\"设置固定 IP\"></a>设置固定 IP</h2><p>NAT 模式接入网络，要检查 windows 中网卡是否开启，并在属性中更改 ipv4 的配置信息</p>\n<br>\n在虚拟机中的虚拟网络编辑器中,更改子网为所需要的 128 网段\n<br>\n\n<p>在 master 中修改网卡配置文件：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">vim</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">/etc/sysconfig/network-scripts/ifcfg-ens33</span></span></code></pre></div><p>修改 bootproto&#x3D;static，onboot&#x3D;yes，并添加 IP 地址、网关、子网掩码和 DNS 信息。<br>重启网卡服务：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">service</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">network</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">restart</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">//systemctl</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">restart</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">network</span></span></code></pre></div><h2 id=\"修改主机名\"><a href=\"#修改主机名\" class=\"headerlink\" title=\"修改主机名\"></a>修改主机名</h2><div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">hostnamectl</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">set-hostname</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">master</span></span></code></pre></div><h2 id=\"xshell-xftp-远程连接虚拟机\"><a href=\"#xshell-xftp-远程连接虚拟机\" class=\"headerlink\" title=\"xshell xftp 远程连接虚拟机\"></a>xshell xftp 远程连接虚拟机</h2><p><a href=\"https://www.xshell.com/zh/free-for-home-school/\">NETSARANG 免费的许可证</a></p>\n<p>若出现远程连接慢，执行以下操作：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">vim</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">/etc/ssh/sshd_config</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">#UseDNS yes ---&gt;默认为注释行</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">UseDNS</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">no</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">---</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #C3E88D\">把注释打开，改为no，然后重启ssh服务即可</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">systemctl</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">restart</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">sshd</span></span></code></pre></div><p>如果操作一切正常仍然连接不上，请检查vm相关服务是否开启以及是否开启自启动</p>\n<h2 id=\"配置本地-yum-源\"><a href=\"#配置本地-yum-源\" class=\"headerlink\" title=\"配置本地 yum 源\"></a>配置本地 yum 源</h2><p>进入&#x2F;etc&#x2F;yum.repos.d</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">cd</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">/etc/yum.repos.d</span></span></code></pre></div><p><br>禁用除了本地 yum 源 ：CentOS-Media.repo 以外的其他源，加文件名后缀.bak</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">mv CentOS-Debuginfo.repo CentOS-Debuginfo.repo.bak</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">mv CentOS-Base.repo CentOS-Base.repo.bak</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">mv CentOS-Vault.repo CentOS-Vault.repo.bak</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">mv CentOS-CR.repo CentOS-CR.repo.bak</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">mv CentOS-fasttrack.repo CentOS-fasttrack.repo.bak</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">mv CentOS-Sources.repo CentOS-Sources.repo.bak</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">mv CentOS-x86_64-kernel.repo CentOS-x86_64-kernel.repo.bak</span></span></code></pre></div><p><br>修改 CentOS-Media.repo 文件内容。将 baseurl 的值修改为“file:&#x2F;&#x2F;&#x2F;media&#x2F;”，将 gpgcheck 的值改为“0”，将 enabled 的值改为“1”。像这样：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">name=CentOS-$releasever - Media</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">baseurl=file:///media/</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">gpgcheck=0</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">enabled=1</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span></span></code></pre></div><br>\n确保开启\"已连接\"\n<br>\n使用\n\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">mount</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">/dev/sr0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">/media</span></span></code></pre></div><p>命令挂载本地 YUM 源。提示写保护则挂载成功。<br><br><br>清理 yum 缓存</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">yum</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">clean</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">all</span></span></code></pre></div><h2 id=\"使用-yum-安装常用软件\"><a href=\"#使用-yum-安装常用软件\" class=\"headerlink\" title=\"使用 yum 安装常用软件\"></a>使用 yum 安装常用软件</h2><p><code>yum install -y vim zip openssh-server openssh-clients</code></p>\n<h2 id=\"安装-Java\"><a href=\"#安装-Java\" class=\"headerlink\" title=\"安装 Java\"></a>安装 Java</h2><p>下载 jdk 的 npm 包(以 jdk-8u281-linux-x64.rpm 为例)，使用 xfpt 传输到&#x2F;opt 目录下</p>\n<p><br>切换到&#x2F;opt，使用命令安装 jdk</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">rpm</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">-ivh</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">jdk-8u281-linux-x64.rpm</span></span></code></pre></div><p><br>验证是否安装成功</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">java</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">-version</span></span></code></pre></div><h2 id=\"安装-Hadoop-修改集群相关配置文件\"><a href=\"#安装-Hadoop-修改集群相关配置文件\" class=\"headerlink\" title=\"安装 Hadoop 修改集群相关配置文件\"></a>安装 Hadoop 修改集群相关配置文件</h2><p>将 Hadoop 安装包 hadoop-3.1.4.tar.gz 上传至虚拟机 master 的&#x2F;opt 目录下，进入&#x2F;opt使用tar解压至&#x2F;usr&#x2F;local：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">tar -zxf hadoop-3.1.4.tar.gz -C /usr/local</span></span></code></pre></div><p><br>进入<code>/usr/local/hadoop-3.1.4/etc/hadoop </code>目录：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">cd /usr/local/hadoop-3.1.4/etc/hadoop</span></span></code></pre></div><p>并修改 core-site.xml、hadoop-env.sh、yarn-env.sh、mapred-site.xml、yarn-site.xml、workers、hdfs-site.xml 共 7 个配置文件的内容。</p>\n<p><br>core-site.xml</p>\n<div class=\"language-xml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">xml</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">configuration</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">fs.defaultFS</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">hdfs://master:8020</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">hadoop.tmp.dir</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">/var/log/hadoop/tmp</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">configuration</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><p>hadoop-env.sh</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">export</span><span style=\"color: #BABED8\"> JAVA_HOME</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">/usr/java/jdk1.8.0_281-amd64</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">//修改</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">JAVA_HOME</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">的值为</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">JDK</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">所在目录（注意版本，确保文件名正确/usr/java/...）</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">//(文件内高亮查找:/JAVA_HOME</span><span style=\"color: #BABED8\">)</span></span></code></pre></div><p>yarn-env.sh</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">#export JAVA_HOME=/home/y/libexec/jdk1.6.0/</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">export</span><span style=\"color: #BABED8\"> JAVA_HOME</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">/usr/java/jdk1.8.0_281-amd64</span></span></code></pre></div><p>mapred-site.xml</p>\n<div class=\"language-xml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">xml</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">configuration</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">mapreduce.framework.name</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">&lt;!-- jobhistory properties --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">mapreduce.jobhistory.address</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">master:10020</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">     </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">mapreduce.jobhistory.webapp.address</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">     </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">master:19888</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.app.mapreduce.am.env</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">mapreduce.map.env</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">mapreduce.reduce.env</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">configuration</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><p>yarn-site.xml</p>\n<div class=\"language-xml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">xml</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">configuration</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">&lt;!-- Site specific YARN configuration properties --&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.resourcemanager.hostname</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">master</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.resourcemanager.address</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">$&#123;yarn.resourcemanager.hostname&#125;:8032</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.resourcemanager.scheduler.address</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">$&#123;yarn.resourcemanager.hostname&#125;:8030</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.resourcemanager.webapp.address</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">$&#123;yarn.resourcemanager.hostname&#125;:8088</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.resourcemanager.webapp.https.address</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">$&#123;yarn.resourcemanager.hostname&#125;:8090</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.resourcemanager.resource-tracker.address</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">$&#123;yarn.resourcemanager.hostname&#125;:8031</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.resourcemanager.admin.address</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">$&#123;yarn.resourcemanager.hostname&#125;:8033</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.nodemanager.local-dirs</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">/data/hadoop/yarn/local</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.log-aggregation-enable</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">true</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.nodemanager.remote-app-log-dir</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">/data/tmp/logs</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.log.server.url</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">http://master:19888/jobhistory/logs/</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">description</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">URL for job history server</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">description</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.nodemanager.vmem-check-enabled</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">false</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.nodemanager.aux-services</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">mapreduce_shuffle</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.nodemanager.aux-services.mapreduce.shuffle.class</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">org.apache.hadoop.mapred.ShuffleHandler</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.nodemanager.resource.memory-mb</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">2048</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.scheduler.minimum-allocation-mb</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">512</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.scheduler.maximum-allocation-mb</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">4096</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">mapreduce.map.memory.mb</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">2048</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">mapreduce.reduce.memory.mb</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">2048</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">yarn.nodemanager.resource.cpu-vcores</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">1</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">configuration</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><p>workers</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">//删除 localhost，添加以下内容</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">slave1</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">slave2</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">slave3</span></span></code></pre></div><p>hdfs-site.xml</p>\n<div class=\"language-xml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">xml</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">configuration</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">dfs.namenode.name.dir</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">file:///data/hadoop/hdfs/name</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">dfs.datanode.data.dir</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">file:///data/hadoop/hdfs/data</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">     </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">dfs.namenode.secondary.http-address</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">     </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">master:50090</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">     </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">dfs.replication</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">     </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\">3</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">value</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">property</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">configuration</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><p><br>为了防止 Hadoop 集群启动失败，需要修改 Hadoop 集群启动和关闭服务的文件。启动和关闭服务的文件在&#x2F;usr&#x2F;local&#x2F;hadoop-3.1.4&#x2F;sbin&#x2F;目录下，需要修改的文件分别是 start-dfs.sh、stop-dfs.sh、start-yarn.sh 和 stop-yarn.sh。</p>\n<p>start-dfs.sh、stop-dfs.sh</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">HDFS_DATANODE_USER</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">root</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">HDFS_DATANODE_SECURE_USER</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">hdfs</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">HDFS_NAMENODE_USER</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">root</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">HDFS_SECONDARYNAMENODE_USER</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">root</span></span></code></pre></div><p>start-yarn.sh 和 stop-yarn.sh</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">YARN_RESOURCEMANAGER_USER</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">root</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">HADOOP_SECURE_DN_USER</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">yarn</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">YARN_NODEMANAGER_USER</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">root</span></span></code></pre></div><p><br>修改主机与 IP 地址映射 &#x2F;etc&#x2F;hosts</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">192.168.128.130 master master.centos.com</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">192.168.128.131 slave1 salve1.centos.com</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">192.168.128.132 slave2 slave2.centos.com</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">192.168.128.133 slave3 slave3.centos.com</span></span></code></pre></div><h2 id=\"克隆虚拟机\"><a href=\"#克隆虚拟机\" class=\"headerlink\" title=\"克隆虚拟机\"></a>克隆虚拟机</h2><p>创建 master 的完整克隆 slave1、slave2、slave3<br>分别修改网卡配置文件和主机名</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">vim /etc/sysconfig/network-scripts/ifcfg-ens33</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">service network restart</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">hostnamectl set-hostname slave1</span></span></code></pre></div><p><br>验证是否配置成功，在 master 上 ping 一下各个节点</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">ping slave1</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">ping slave2</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">ping slave3</span></span></code></pre></div><h2 id=\"配置-ssh-免密登录\"><a href=\"#配置-ssh-免密登录\" class=\"headerlink\" title=\"配置 ssh 免密登录\"></a>配置 ssh 免密登录</h2><p>master 上创建 ssh 密钥，三次 enter 键</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">ssh-keygen</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">-t</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">rsa</span></span></code></pre></div><p><br>使用 ssh-copy-id 命令将公钥复制至远程机器中。按提示输入 yes 和密码</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">ssh-copy-id -i /root/.ssh/id_rsa.pub master</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">ssh-copy-id -i /root/.ssh/id_rsa.pub slave1</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">ssh-copy-id -i /root/.ssh/id_rsa.pub slave2</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">ssh-copy-id -i /root/.ssh/id_rsa.pub slave3</span></span></code></pre></div><p><br>验证 SSH 是否能够无密钥登录。在 master 主节点下分别输入“ssh slave1”“ssh slave2”“ssh slave3”</p>\n<h2 id=\"配置时间同步服务\"><a href=\"#配置时间同步服务\" class=\"headerlink\" title=\"配置时间同步服务\"></a>配置时间同步服务</h2><p>检查 master 和各节点虚拟机是否连接</p>\n<p><br>在 master 和各节点重新挂在本地 yum 源</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">mount</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">/dev/sr0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">/media</span></span></code></pre></div><p><br>安装 ntp 服务</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">yum</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">install</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">-y</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">ntp</span></span></code></pre></div><p><br>修改 master 的&#x2F;etc&#x2F;ntp.conf 文件，注释掉以 server 开头的行，添加：</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">restrict</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">192.168</span><span style=\"color: #C3E88D\">.1.0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">mask</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">255.255</span><span style=\"color: #C3E88D\">.255.0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">nomodify</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">notrap</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">server</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">127.127</span><span style=\"color: #C3E88D\">.1.0</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">fudge</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">127.127</span><span style=\"color: #C3E88D\">.1.0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">stratum</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span></span></code></pre></div><p><br>修改 slave1、slave2、slave3 的&#x2F;etc&#x2F;ntp.conf 文件，注释掉 server 开头的行，并添加:<br>server master</p>\n<p><br>关闭 master 和 slave1、slave2、slave3 防火墙</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">systemctl stop firewalld</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">systemctl disable firewalld</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">systemctl status firewalld</span></span></code></pre></div><p> &#x2F;&#x2F;状态为 dead</p>\n<p><br>在 master 启动 ntp</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">systemctl start ntpd</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">systemctl enable ntpd</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">systemctl status ntpd</span></span></code></pre></div><p>&#x2F;&#x2F;查看状态为 active 说明成功</p>\n<p><br>slave1、slave2、slave3 同步时间</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">ntpdate</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">master</span></span></code></pre></div><p><br>slave1、slave2、slave3 启动 ntp</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">systemctl start ntpd</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">systemctl enable ntpd</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">systemctl status ntpd</span></span></code></pre></div><p>&#x2F;&#x2F;查看状态为 active 说明成功</p>\n<h2 id=\"配置环境变量和格式化-NameNode\"><a href=\"#配置环境变量和格式化-NameNode\" class=\"headerlink\" title=\"配置环境变量和格式化 NameNode\"></a>配置环境变量和格式化 NameNode</h2><p>在 master 和 slave1、slave2、slave3 修改&#x2F;etc&#x2F;profile 文件，注意文件版本名。使用 <code>source /etc/profile </code>生效</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">export</span><span style=\"color: #BABED8\"> HADOOP_HOME</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">/usr/local/hadoop-3.1.4</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">export</span><span style=\"color: #BABED8\"> PATH</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\">$HADOOP_HOME</span><span style=\"color: #C3E88D\">/bin:</span><span style=\"color: #BABED8\">$PATH</span><span style=\"color: #C3E88D\">:</span><span style=\"color: #BABED8\">$JAVA_HOME</span><span style=\"color: #C3E88D\">/bin</span></span></code></pre></div><p>在 master 和 slave1、slave2、slave3 输入 <code>hdfs namenode -format </code>格式化</p>\n<h2 id=\"启动和关闭集群\"><a href=\"#启动和关闭集群\" class=\"headerlink\" title=\"启动和关闭集群\"></a>启动和关闭集群</h2><p>启动</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">cd $HADOOP</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">sbin/start-dfs.sh</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">sbin/start-yarn.sh</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">sbin/mr-jobhistory-daemon.sh start historyserver</span></span></code></pre></div><p>关闭</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">cd $HADOOP</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">sbin/stop-dfs.sh</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">sbin/stop-yarn.sh</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">sbin/mr-jobhistory-daemon.sh stop historyserver</span></span></code></pre></div><h2 id=\"监控集群\"><a href=\"#监控集群\" class=\"headerlink\" title=\"监控集群\"></a>监控集群</h2><p>修改 windows 中的 C:\\Windows\\System32\\drivers\\etc\\hosts 文件(需要在属性中开启 user 的读写权限)</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">192.168.128.130 master master.centos.com</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">192.168.128.131 slave1 salve1.centos.com</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">192.168.128.132 slave2 slave2.centos.com</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">192.168.128.133 slave3 slave3.centos.com</span></span></code></pre></div><p><br>集群监控</p>\n<p><a href=\"http://master:9870/\">http://master:9870</a> &#x2F;&#x2F;hdfs 监控<br><a href=\"http://master:8088/\">http://master:8088</a> &#x2F;&#x2F;yarn 监控<br><a href=\"http://master:19888/\">http://master:19888</a> &#x2F;&#x2F;jobhistory 日志监控</p>\n","text":"设置固定 IPNAT 模式接入网络，要检查 windows 中网卡是否开启，并在属性中更改 ipv4 的配置信息 在虚拟机中的虚拟网络编辑器中,更改子网为所需要...","permalink":"/post/HADOOP-集群搭建","photos":[],"count_time":{"symbolsCount":"10k","symbolsTime":"9 mins."},"categories":[{"name":"大数据开发","slug":"大数据开发","count":2,"path":"api/categories/大数据开发.json"}],"tags":[{"name":"hadoop","slug":"hadoop","count":1,"path":"api/tags/hadoop.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E5%9B%BA%E5%AE%9A-IP\"><span class=\"toc-text\">设置固定 IP</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D\"><span class=\"toc-text\">修改主机名</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#xshell-xftp-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA\"><span class=\"toc-text\">xshell xftp 远程连接虚拟机</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0-yum-%E6%BA%90\"><span class=\"toc-text\">配置本地 yum 源</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8-yum-%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6\"><span class=\"toc-text\">使用 yum 安装常用软件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85-Java\"><span class=\"toc-text\">安装 Java</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85-Hadoop-%E4%BF%AE%E6%94%B9%E9%9B%86%E7%BE%A4%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">安装 Hadoop 修改集群相关配置文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%8B%E9%9A%86%E8%99%9A%E6%8B%9F%E6%9C%BA\"><span class=\"toc-text\">克隆虚拟机</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE-ssh-%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95\"><span class=\"toc-text\">配置 ssh 免密登录</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">配置时间同步服务</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%92%8C%E6%A0%BC%E5%BC%8F%E5%8C%96-NameNode\"><span class=\"toc-text\">配置环境变量和格式化 NameNode</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD%E9%9B%86%E7%BE%A4\"><span class=\"toc-text\">启动和关闭集群</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%9B%91%E6%8E%A7%E9%9B%86%E7%BE%A4\"><span class=\"toc-text\">监控集群</span></a></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://imgloc.com/image/nvClX","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"轮播图的两种实现方式:切换与平移","uid":"9586898e5a198e00a7873bf32843aa83","slug":"轮播图的两种实现方式-切换与平移","date":"2022-12-08T16:00:00.000Z","updated":"2023-04-30T10:38:42.040Z","comments":true,"path":"api/articles/轮播图的两种实现方式-切换与平移.json","keywords":null,"cover":null,"text":"","permalink":"/post/轮播图的两种实现方式-切换与平移","photos":[],"count_time":{"symbolsCount":0,"symbolsTime":"1 mins."},"categories":[{"name":"前端开发","slug":"前端开发","count":1,"path":"api/categories/前端开发.json"}],"tags":[{"name":"Javascript","slug":"Javascript","count":1,"path":"api/tags/Javascript.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://imgloc.com/image/nvClX","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"shell编程实践","uid":"0c98adb549c320eeb63bf21d0f37524f","slug":"shell","date":"2022-04-23T01:21:53.000Z","updated":"2023-02-17T04:31:59.882Z","comments":true,"path":"api/articles/shell.json","keywords":null,"cover":[],"text":"shell 编程实践使用 shell 编写杨辉三角 回顾排列组合从 5 个人中抽取 3 个人参加会议(3 个人不能是同一个人，即无重复) ① 有顺序 则有 5×...","permalink":"/post/shell","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"Linux","slug":"Linux","count":1,"path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","slug":"Linux","count":1,"path":"api/tags/Linux.json"},{"name":"shell","slug":"shell","count":1,"path":"api/tags/shell.json"},{"name":"脚本","slug":"脚本","count":1,"path":"api/tags/脚本.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://imgloc.com/image/nvClX","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}